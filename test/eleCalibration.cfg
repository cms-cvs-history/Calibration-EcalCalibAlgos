process Calibration2 =
{

# initialize  MessageLogger
 include "FWCore/MessageLogger/data/MessageLogger.cfi"

 source = PoolSource
   {
       untracked vstring fileNames = 
       {
#'rfio:/castor/cern.ch/user/w/wieland/CMSSW_1_5_1WenuCalibAnalysis/WenuCalibAnalysis_450492.root'

'file:/afs/cern.ch/user/b/beaucero/scratch0/Transfert/Batchalcarecowith2Prod.root'


}

   untracked uint32 skipEvents = 0 
}
untracked PSet maxEvents = {untracked int32 input = -1}
 
   module electronFilter = EtaPtMinPixelMatchGsfElectronFullCloneSelector
    {
	InputTag src = pixelMatchGsfElectrons
	bool filter = true
	double ptMin = 5.0
	double etaMin = -2.7
	double etaMax = 2.7
    }
  
#  AlCaElectrons producer
module alCaIsolatedElectrons = AlCaEleceletronsProducer
{
    InputTag ebRecHitsLabel = ecalRecHit:EcalRecHitsEB
       InputTag eeRecHitsLabel = ecalRecHit:EcalRecHitsEE
    InputTag electronLabel = electronFilter
    
    string alcaBarrelHitCollection = "alcaBarrelHits"
        string alcaEndcapHitCollection = "alcaEndcapHits"    
    int32 etaSize = 11
    int32 phiSize = 21
}

include "CalibCalorimetry/Configuration/data/Ecal_FakeConditions.cff"
    es_source = CaloMiscalibTools{
	untracked string fileNameBarrel = "miscalib_barrel_0.05.xml"
	}
    es_prefer = CaloMiscalibTools{}



module miscalrechit = EcalRecHitRecalib {
    string ecalRecHitsProducer = "alCaIsolatedElectrons"
    string barrelHitCollection = "alcaBarrelHits"
    string endcapHitCollection = "alcaEndcapHits"
    string RecalibBarrelHitCollection = "alcaBarrelHits"
    string RecalibEndcapHitCollection = "alcaEndcapHits"
}

module calibration2 = ElectronCalibration {
   string rootfile = "TEST2.root"
#   InputTag ebRecHitsLabel = alCaIsolatedElectrons:alcaBarrelHits
   InputTag ebRecHitsLabel = miscalrechit:alcaBarrelHits
   InputTag electronLabel = electronFilter
   InputTag trackLabel = ctfWithMaterialTracks
   string CALIBRATION_ALGO = "L3"	
	int32 keventweight = 2
	double ElePt = 25
        int32 Clustersize = 5
# to reproduce HLT we use 25 GeV instead of 5 GeV
	double maxeta = 26
	double mineta = 1
	double maxphi = 41
	double minphi = 21
	double	cut1 = 0.92
	double cut2 = 0.8
	double cut3 = 1.2
   string miscalibfile = "miscalib_barrel_0.05.txt"
	int32 elecclass = -1
	int32 numevent = -1
	double cutEPCaloMin = 0.8
	double cutEPCaloMax = 1.2
	double cutEPinMin = 0.8
      	double cutEPinMax = 1.2
	double cutCaloMin = 0.9
	double cutCaloMax = 1.2
	double cutESeed = 0.96

   }

# ouptut module details
  include "Calibration/EcalAlCaRecoProducers/data/ALCARECOEcalCalElectron_Output.cff"
module out = PoolOutputModule
 {
       using OutALCARECOEcalCalElectron
	  
    untracked string fileName = "alcarecowenu.root"
 }

path p = {miscalrechit,calibration2 }

service = Timing{}

# path p = {calibration2 }


# endpath e = { out}

}
